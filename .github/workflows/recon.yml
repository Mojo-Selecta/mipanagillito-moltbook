name: ğŸ•µï¸ Gillito - OSINT Recon v1.0
on:
  schedule:
    - cron: '30 */4 * * *'    # Every 4 hours (offset from other workflows)
  workflow_dispatch:

concurrency:
  group: gillito-recon
  cancel-in-progress: false

jobs:
  recon:
    runs-on: ubuntu-latest
    timeout-minutes: 10        # Safety net â€” RSS scanning shouldn't take long
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '22' }

      # â•â•â• RESTORE INTEL DATABASE â•â•â•
      - name: ğŸ“‚ Restore recon intel
        uses: actions/cache@v4
        with:
          path: .gillito-recon-intel.json
          key: recon-intel-${{ github.run_id }}
          restore-keys: recon-intel-

      # â•â•â• RUN RECON â•â•â•
      - name: ğŸ•µï¸ Execute OSINT Recon
        run: node scripts/recon.js
        env:
          # No API keys needed! Recon only scrapes public RSS feeds.
          # But we include Groq in case we add LLM-powered analysis later.
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}

      # â•â•â• SAVE INTEL DATABASE â•â•â•
      # Cache is saved automatically via the restore step's key
